<h1 class="text-2xl font-bold mb-4">Past Orders</h1>

<% if @orders.empty? %>
  <p class="text-gray-700">You have no past orders.</p>
<% else %>
  <% @orders.each do |order| %>
    <div class="bg-white shadow-md rounded-lg p-6 mb-4">
      <h2 class="text-lg font-semibold mb-2">Order ID: <%= order.id %></h2>
      <p>Status: <%= order.status %></p>
      <p>Order Date: <%= order.created_at.strftime("%Y-%m-%d") %></p>
      <p>Total Price: <%= number_to_currency(order.total_price) %></p>
      <h3 class="text-md font-semibold mt-4">Products:</h3>
      <ul class="list-disc list-inside ml-4">
        <% order.order_items.each do |item| %>
          <li><%= item.product.name %> - <%= number_to_currency(item.price) %> x <%= item.quantity %></li>
        <% end %>
      </ul>
      <h3 class="text-md font-semibold mt-4">Taxes:</h3>
      <p>GST: <%= number_to_percentage(order.order_tax.gst * 100, precision: 2) %></p>
      <p>PST: <%= number_to_percentage(order.order_tax.pst * 100, precision: 2) %></p>
      <p>HST: <%= number_to_percentage(order.order_tax.hst * 100, precision: 2) %></p>
      <% if current_user.province.name == 'Quebec' %>
        <p>QST: <%= number_to_percentage(order.order_tax.qst * 100, precision: 2) %></p>
      <% end %>
    </div>
  <% end %>
<% end %>